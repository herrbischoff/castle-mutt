# {{{ Accounts
macro index,pager gi "<change-folder>=INBOX<enter>" "Change to Inbox"
macro index,pager gl "<change-folder>=Logs<enter>" "Change to Logs"
macro index,pager gs "<change-folder>=Sent<enter>" "Change to Sent"
macro index,pager gj "<change-folder>=Junk<enter>" "Change to Junk"
macro index,pager ga "<change-folder>=Archive<enter>" "Change to Archive"
macro index,pager gm "<change-folder>=MacPorts<enter>" "Change to MacPorts mailing list"
# }}}
# {{{ mbsync
macro index n "<shell-escape>mbsync --all && notmuch new<enter>" "run mbsync to sync all mail"
# }}}
# {{{ Saner copy/move dialogs
macro index C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"
macro index,pager J "<save-message>=Junk<enter>" "Change to Junk"
# }}}
# {{{ Spamcop
macro index,pager,attach S ":set autoedit=no fast_reply=yes editor=\"true\"\n<tag-prefix><forward-message>submit.GZCfUpRwtLeZLlPz@spam.spamcop.net, spam@knujon.net, spam@uce.gov\n\ny" "Forward mail to SpamCop"
# }}}
# {{{ HTML handling
macro pager \Cu "|urlview<enter>" "call urlview to open links"
macro pager l "| elinks -force-html; clear\n"
# }}}
# {{{ Sidebar Patch
macro index b '<enter-command>toggle sidebar_visible<enter><refresh>'
macro pager b '<enter-command>toggle sidebar_visible<enter><redraw-screen>'
# }}}
# {{{ notmuch
# 'L' performs a notmuch query, showing only the results
macro index / "<enter-command>unset wait_key<enter><shell-escape>mutt-notmuch-py<enter><change-folder-readonly>~/.cache/mutt_results<enter>" \
            "search mail (using notmuch)"
# macro index L "<enter-command>unset wait_key<enter><shell-escape>read -p 'notmuch query: ' x; echo \$x >~/.cache/mutt_terms<enter><limit>~i \"\`notmuch search --output=messages \$(cat ~/.cache/mutt_terms) | head -n 600 | perl -le '@a=<>;chomp@a;s/\^id:// for@a;$,=\"|\";print@a'\`\"<enter>" "show only messages matching a notmuch pattern"
# 'a' shows all messages again (supersedes default <alias> binding)
macro index a "<limit>all\n" "show all messages (undo limit)"
# }}}
# vim:foldmethod=marker:foldlevel=0:ft=muttrc
